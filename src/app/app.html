<div class="layout">
  <!-- LEFT: Tree (only leaves selectable) -->
  <aside class="sidenav">
    <mat-tree #tree [dataSource]="treeData" [childrenAccessor]="childrenAccessor">

      <!-- Leaf: selectable -->
      <mat-tree-node
        *matTreeNodeDef="let node"
        matTreeNodePadding
        class="mat-tree-node tree-node selectable"
        [class.selected]="isSelected(node)"
        [attr.aria-selected]="isSelected(node)"
        tabindex="0"
        (click)="selectNode(node)"
        (keydown.enter)="selectNode(node)"
        (keydown.space)="selectNode(node)">
        <button matIconButton disabled></button>
        <span class="label">{{ node.name }}</span>
      </mat-tree-node>

      <!-- Expandable: NOT selectable at top level -->
      <mat-tree-node
        *matTreeNodeDef="let node; when: hasChild"
        matTreeNodePadding
        matTreeNodeToggle
        class="mat-tree-node tree-node"
        [class.selectable]="isSelectable(node)"
        [class.selected]="isSelectable(node) && isSelected(node)"
        [cdkTreeNodeTypeaheadLabel]="node.name"
        [attr.aria-selected]="isSelectable(node) ? isSelected(node) : null"
        [attr.tabindex]="isSelectable(node) ? 0 : -1"
        (click)="selectNode(node)"
        (keydown.enter)="selectNode(node)"
        (keydown.space)="selectNode(node)">
        <button
          matIconButton
          matTreeNodeToggle
          (click)="$event.stopPropagation()"
          [attr.aria-label]="'Toggle ' + node.name">
          <mat-icon class="mat-icon-rtl-mirror">
            {{ tree.isExpanded(node) ? 'expand_more' : 'chevron_right' }}
          </mat-icon>
        </button>
        <span class="label">{{ node.name }}</span>
      </mat-tree-node>

    </mat-tree>
  </aside>

  <!-- RIGHT: Table + paginator -->
  <section class="content">
    <div class="table-container mat-elevation-z8">
      <table mat-table [dataSource]="dataSource">
        <ng-container matColumnDef="position">
          <th mat-header-cell *matHeaderCellDef sticky>No.</th>
          <td mat-cell *matCellDef="let e">{{ e.position }}</td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef sticky>Name</th>
          <td mat-cell *matCellDef="let e">{{ e.name }}</td>
        </ng-container>

        <ng-container matColumnDef="weight">
          <th mat-header-cell *matHeaderCellDef sticky>Weight</th>
          <td mat-cell *matCellDef="let e">{{ e.weight }}</td>
        </ng-container>

        <ng-container matColumnDef="symbol">
          <th mat-header-cell *matHeaderCellDef sticky>Symbol</th>
          <td mat-cell *matCellDef="let e">{{ e.symbol }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>

    <!-- dataSource is non-null; data is always an array -->
    <mat-paginator
      [length]="dataSource.data.length"
      [pageSize]="pageSize"
      showFirstLastButtons
      class="footer-paginator">
    </mat-paginator>
  </section>
</div>
