<!-- src/app/app.html -->
<div class="layout">
  <!-- LEFT: Static list with sections (restored) -->
  <aside class="sidenav">
    <nav class="nav-list" role="navigation" aria-label="Database objects">
      <div class="nav-section" role="group" aria-label="Tables">
        <div class="nav-section-label">Tables</div>
        @for (node of (treeData[0]?.children ?? []); track node.name) {
          <button
            type="button"
            class="nav-item"
            [class.selectable]="isSelectable(node)"
            [class.selected]="isSelected(node)"
            [attr.aria-current]="isSelected(node) ? 'true' : null"
            [disabled]="!isSelectable(node)"
            (click)="selectNode(node)">
            {{ node.name }}
          </button>
        }
      </div>

      <mat-divider></mat-divider>

      <div class="nav-section" role="group" aria-label="Views">
        <div class="nav-section-label">Views</div>
        @for (node of (treeData[1]?.children ?? []); track node.name) {
          <button
            type="button"
            class="nav-item"
            [class.selectable]="isSelectable(node)"
            [class.selected]="isSelected(node)"
            [attr.aria-current]="isSelected(node) ? 'true' : null"
            [disabled]="!isSelectable(node)"
            (click)="selectNode(node)">
            {{ node.name }}
          </button>
        }
      </div>
    </nav>
  </aside>

  <!-- RIGHT: Dynamic grid + paginator -->
  <section class="content" style="position: relative;">
    @if (loading()) {
      <app-loading-indicator />
    }

    <div class="table-container">
      <table
        class="striped"
        mat-table
        [dataSource]="rows"
        matSort
        [matSortDisabled]="columns.length === 0"
        (matSortChange)="onSort($event)"
      >
        @for (col of columns; track col) {
          <ng-container [matColumnDef]="col">
            <th mat-header-cell *matHeaderCellDef sticky mat-sort-header="{{ col }}">
              {{ col }}
            </th>
            <td mat-cell *matCellDef="let row">{{ row[col] }}</td>
          </ng-container>
        }
        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>

    <mat-paginator
      [length]="total"
      [pageIndex]="pageIndex"
      [pageSize]="pageSize"
      [hidePageSize]="true"
      showFirstLastButtons
      class="footer-paginator"
      (page)="onPage($event)"
    >
    </mat-paginator>
  </section>
</div>
